{"ast":null,"code":"import { resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createElementBlock as _createElementBlock, createTextVNode as _createTextVNode, withCtx as _withCtx, createVNode as _createVNode, createElementVNode as _createElementVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"user\"\n};\nconst _hoisted_2 = {\n  key: 1\n};\nconst _hoisted_3 = {\n  key: 1\n};\nconst _hoisted_4 = {\n  style: {\n    \"display\": \"flex\",\n    \"align-items\": \"center\"\n  }\n};\nconst _hoisted_5 = {\n  key: 0\n};\nconst _hoisted_6 = {\n  key: 1\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_v_text_field = _resolveComponent(\"v-text-field\");\n  const _component_v_icon = _resolveComponent(\"v-icon\");\n  const _component_v_data_table = _resolveComponent(\"v-data-table\");\n  const _component_v_card = _resolveComponent(\"v-card\");\n  const _component_v_btn = _resolveComponent(\"v-btn\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_v_card, {\n    elevation: \"5\",\n    class: \"d-flex\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_v_data_table, {\n      headers: _ctx.headers,\n      items: _ctx.itens\n    }, {\n      [`item.username`]: _withCtx(({\n        item\n      }) => [item.id === _ctx.itemEditado.id ? (_openBlock(), _createBlock(_component_v_text_field, {\n        key: 0,\n        id: `username_${item.id}`,\n        ref: `username_${item.id}`,\n        modelValue: _ctx.itemEditado.username,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => _ctx.itemEditado.username = $event),\n        \"hide-details\": true,\n        dense: \"\",\n        \"single-line\": \"\"\n      }, null, 8 /* PROPS */, [\"id\", \"modelValue\"])) : (_openBlock(), _createElementBlock(\"span\", _hoisted_2, _toDisplayString(item.username), 1 /* TEXT */))]),\n      [`item.password`]: _withCtx(({\n        item\n      }) => [item.id === _ctx.itemEditado.id ? (_openBlock(), _createBlock(_component_v_text_field, {\n        key: 0,\n        id: `password${item.id}`,\n        ref: `password${item.id}`,\n        modelValue: _ctx.itemEditado.password,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => _ctx.itemEditado.password = $event),\n        \"hide-details\": true,\n        dense: \"\",\n        \"single-line\": \"\"\n      }, null, 8 /* PROPS */, [\"id\", \"modelValue\"])) : (_openBlock(), _createElementBlock(\"span\", _hoisted_3, _toDisplayString(item.password), 1 /* TEXT */))]),\n      [`item.actions`]: _withCtx(({\n        item\n      }) => [_createElementVNode(\"div\", _hoisted_4, [item.id === _ctx.itemEditado.id ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [_createVNode(_component_v_icon, {\n        color: \"red\",\n        class: \"mr-3\",\n        onClick: _cache[2] || (_cache[2] = $event => $options.fecharEditar())\n      }, {\n        default: _withCtx(() => [_createTextVNode(\" mdi-window-close \")]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_v_icon, {\n        color: \"green\",\n        onClick: _cache[3] || (_cache[3] = $event => $options.salvarItem())\n      }, {\n        default: _withCtx(() => [_createTextVNode(\" mdi-content-save \")]),\n        _: 1 /* STABLE */\n      })])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [_createVNode(_component_v_icon, {\n        class: \"light-green\",\n        onClick: $event => $options.abrirEditar(item),\n        title: \"Editar\"\n      }, {\n        default: _withCtx(() => [_createTextVNode(\" mdi-pencil \")]),\n        _: 2 /* DYNAMIC */\n      }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"])]))])]),\n      _: 2 /* DYNAMIC */\n    }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"headers\", \"items\"])]),\n    _: 1 /* STABLE */\n  }), _ctx.indiceEditado === -1 ? (_openBlock(), _createBlock(_component_v_btn, {\n    key: 0,\n    small: \"\",\n    elevation: \"2\",\n    color: \"success\",\n    onClick: _cache[4] || (_cache[4] = $event => $options.novoUsuario())\n  }, {\n    default: _withCtx(() => [_createTextVNode(\" + NOVO USUÁRIO \")]),\n    _: 1 /* STABLE */\n  })) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","key","style","_createElementBlock","_hoisted_1","_createVNode","_component_v_card","elevation","default","_withCtx","_component_v_data_table","headers","_ctx","items","itens","item","id","itemEditado","_createBlock","_component_v_text_field","ref","modelValue","username","_cache","$event","dense","_hoisted_2","_toDisplayString","password","_hoisted_3","_createElementVNode","_hoisted_4","_hoisted_5","_component_v_icon","color","onClick","$options","fecharEditar","_createTextVNode","_","salvarItem","_hoisted_6","abrirEditar","title","indiceEditado","_component_v_btn","small","novoUsuario","_createCommentVNode"],"sources":["/drop/Dropbox/vuejs/8o_app/src/components/users.vue"],"sourcesContent":["<template>\n <div class=\"user\">\n  <v-card elevation=\"5\" class=\"d-flex\">\n   <v-data-table :headers=\"headers\" :items=\"itens\">\n\n    <template v-slot:[`item.username`]=\"{ item }\">\n        <v-text-field\n          :id=\"`username_${item.id}`\"\n          :ref=\"`username_${item.id}`\"\n          v-model=\"itemEditado.username\"\n          :hide-details=\"true\"\n          dense\n          single-line\n          v-if=\"item.id === itemEditado.id\"\n        ></v-text-field>\n        <span v-else>{{ item.username }}</span>\n    </template>\n\n    <template v-slot:[`item.password`]=\"{ item }\">\n        <v-text-field\n          :id=\"`password${item.id}`\"\n          :ref=\"`password${item.id}`\"\n          v-model=\"itemEditado.password\"\n          :hide-details=\"true\"\n          dense\n          single-line\n          v-if=\"item.id === itemEditado.id\"\n        ></v-text-field>\n        <span v-else>{{ item.password }}</span>\n      </template>\n\n    <template v-slot:[`item.actions`]=\"{ item }\">\n      <div style=\"display: flex; align-items: center\">\n        <div v-if=\"item.id === itemEditado.id\">\n          <v-icon color=\"red\" class=\"mr-3\" @click=\"fecharEditar()\">\n              mdi-window-close\n            </v-icon>\n            <v-icon color=\"green\" @click=\"salvarItem()\">\n              mdi-content-save\n            </v-icon>\n        </div>\n        <div v-else>\n          <v-icon class=\"light-green\" @click=\"abrirEditar(item)\" title=\"Editar\">\n              mdi-pencil\n            </v-icon>\n        </div>\n      </div>\n    </template> \n   </v-data-table>\n  </v-card>\n   <v-btn v-if=\"indiceEditado === -1\" small elevation=\"2\" color=\"success\" @click=\"novoUsuario()\">\n    + NOVO USUÁRIO\n   </v-btn>     \n </div>\n</template>\n\n<script>\n\n//import dados from \"../api\";\nimport servicoUsuario from \"../api/usuario\";\n\nexport default {\n  name: \"vwUser\",\n\n  data: () => ({\n    itens: [],\n    itemDefault: {\n      id: 0, \n      username: 'Novo',\n      password: '123456'\n    },    \n    itemEditado: {},\n    indiceEditado: -1,\n    headers: [\n      { key: 'id', title: 'ID' },\n      { key: 'username', title: 'Usuário' },\n      { key: 'password', title: 'Senha' },\n      { key: 'actions', title: \"Ações\"  },\n    ],\n  }),\n\n  methods: {\n    async carregarUsuarios() {\n      this.itens = await servicoUsuario.getUsers();\n      console.log(JSON.stringify(this.itens));\n    },\n    abrirEditar(item) {\n      this.indiceEditado = this.itens.indexOf(item);\n      this.itemEditado = Object.assign({}, item);\n    },\n    fecharEditar() {\n      setTimeout(() => {\n        this.itemEditado = {};\n        this.indiceEditado = -1;\n      }, 300);      \n    },\n    atualizarItem() {\n      servicoUsuario.updateUser(this.itemEditado)\n      .then(()=>{\n        // mensagem ao usuário...\n        this.fecharEditar();\n      })\n      .catch((e)=>{\n        console.error(e);\n        this.fecharEditar();\n      });\n    },\n    criarItem(){\n      servicoUsuario.createUser(this.itemEditado)\n      .then(()=>{\n        // mensagem ao usuário...\n        this.fecharEditar();\n      })\n      .catch((e)=>{\n        console.error(e);\n        this.fecharEditar();\n      });\n    },\n    async salvarItem() {\n      //console.log(`teste salvar`)\n      if (this.indiceEditado > -1) {\n        Object.assign(this.itens[this.indiceEditado], this.itemEditado);\n      }\n      console.log(this.itemEditado)\n      if (this.itemEditado.id > 0) {\n        await this.atualizarItem();\n      } else {\n        this.itemEditado.password = '123456'\n        await this.criarItem();\n      }\n      this.carregarUsuarios();\n    },\n    novoUsuario() {\n      this.itens.push(this.itemDefault);\n      this.indiceEditado = this.itens.length-1;\n      console.log(this.itens[this.indiceEditado]);\n      this.itemEditado = Object.assign({}, this.itemDefault);\n    },\n  },\n\n  mounted() {\n    this.carregarUsuarios();    \n  },   \n};\n\n</script>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}