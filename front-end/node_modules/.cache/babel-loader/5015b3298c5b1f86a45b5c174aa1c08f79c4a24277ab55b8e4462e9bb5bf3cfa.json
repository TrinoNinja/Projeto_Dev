{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n//import dados from \"../api\";\nimport servicoUsuario from \"../api/usuario\";\nexport default {\n  name: \"vwUser\",\n  data: () => ({\n    itens: [],\n    itemDefault: {\n      id: 0,\n      username: 'Novo',\n      password: '123456'\n    },\n    itemEditado: {},\n    indiceEditado: -1,\n    headers: [{\n      key: 'id',\n      title: 'ID'\n    }, {\n      key: 'username',\n      title: 'Usuário'\n    }, {\n      key: 'password',\n      title: 'Senha'\n    }, {\n      key: 'actions',\n      title: \"Ações\"\n    }]\n  }),\n  methods: {\n    async carregarUsuarios() {\n      this.itens = await servicoUsuario.getUsers();\n      console.log(JSON.stringify(this.itens));\n    },\n    abrirEditar(item) {\n      this.indiceEditado = this.itens.indexOf(item);\n      this.itemEditado = Object.assign({}, item);\n    },\n    fecharEditar() {\n      setTimeout(() => {\n        this.itemEditado = {};\n        this.indiceEditado = -1;\n      }, 300);\n    },\n    atualizarItem() {\n      servicoUsuario.updateUser(this.itemEditado).then(() => {\n        // mensagem ao usuário...\n        this.fecharEditar();\n      }).catch(e => {\n        console.error(e);\n        this.fecharEditar();\n      });\n    },\n    criarItem() {\n      servicoUsuario.createUser(this.itemEditado).then(() => {\n        // mensagem ao usuário...\n        this.fecharEditar();\n      }).catch(e => {\n        console.error(e);\n        this.fecharEditar();\n      });\n    },\n    async salvarItem() {\n      //console.log(`teste salvar`)\n      if (this.indiceEditado > -1) {\n        Object.assign(this.itens[this.indiceEditado], this.itemEditado);\n      }\n      console.log(this.itemEditado);\n      if (this.itemEditado.id > 0) {\n        await this.atualizarItem();\n      } else {\n        this.itemEditado.password = '123456';\n        await this.criarItem();\n      }\n      this.carregarUsuarios();\n    },\n    novoUsuario() {\n      this.itens.push(this.itemDefault);\n      this.indiceEditado = this.itens.length - 1;\n      console.log(this.itens[this.indiceEditado]);\n      this.itemEditado = Object.assign({}, this.itemDefault);\n    }\n  },\n  mounted() {\n    this.carregarUsuarios();\n  }\n};","map":{"version":3,"names":["servicoUsuario","name","data","itens","itemDefault","id","username","password","itemEditado","indiceEditado","headers","key","title","methods","carregarUsuarios","getUsers","console","log","JSON","stringify","abrirEditar","item","indexOf","Object","assign","fecharEditar","setTimeout","atualizarItem","updateUser","then","catch","e","error","criarItem","createUser","salvarItem","novoUsuario","push","length","mounted"],"sources":["/drop/Dropbox/vuejs/8o_app/src/components/users.vue"],"sourcesContent":["<template>\n <div class=\"user\">\n  <div class=\"mx-auto\" style=\"padding:20px;max-width:300px;\">Usuários</div>\n\n\n  <v-data-table :headers=\"headers\" :items=\"itens\">\n\n    <template v-slot:[`item.username`]=\"{ item }\">\n        <v-text-field\n          :id=\"`username_${item.id}`\"\n          :ref=\"`username_${item.id}`\"\n          v-model=\"itemEditado.username\"\n          :hide-details=\"true\"\n          dense\n          single-line\n          v-if=\"item.id === itemEditado.id\"\n        ></v-text-field>\n        <span v-else>{{ item.username }}</span>\n    </template>\n\n    <template v-slot:[`item.password`]=\"{ item }\">\n        <v-text-field\n          :id=\"`password${item.id}`\"\n          :ref=\"`password${item.id}`\"\n          v-model=\"itemEditado.password\"\n          :hide-details=\"true\"\n          dense\n          single-line\n          v-if=\"item.id === itemEditado.id\"\n        ></v-text-field>\n        <span v-else>{{ item.password }}</span>\n      </template>\n\n    <template v-slot:[`item.actions`]=\"{ item }\">\n      <div style=\"display: flex; align-items: center\">\n        <div v-if=\"item.id === itemEditado.id\">\n          <v-icon color=\"red\" class=\"mr-3\" @click=\"fecharEditar()\">\n              mdi-window-close\n            </v-icon>\n            <v-icon color=\"green\" @click=\"salvarItem()\">\n              mdi-content-save\n            </v-icon>\n        </div>\n        <div v-else>\n          <v-icon class=\"light-green\" @click=\"abrirEditar(item)\" title=\"Editar\">\n              mdi-pencil\n            </v-icon>\n        </div>\n      </div>\n    </template> \n  </v-data-table>\n    \n    <v-btn v-if=\"indiceEditado === -1\" small elevation=\"\" color=\"success\" @click=\"novoUsuario()\">\n        + NOVO USUÁRIO\n    </v-btn>     \n\n </div>\n</template>\n\n<script>\n\n//import dados from \"../api\";\nimport servicoUsuario from \"../api/usuario\";\n\nexport default {\n  name: \"vwUser\",\n\n  data: () => ({\n    itens: [],\n    itemDefault: {\n      id: 0, \n      username: 'Novo',\n      password: '123456'\n    },    \n    itemEditado: {},\n    indiceEditado: -1,\n    headers: [\n      { key: 'id', title: 'ID' },\n      { key: 'username', title: 'Usuário' },\n      { key: 'password', title: 'Senha' },\n      { key: 'actions', title: \"Ações\"  },\n    ],\n  }),\n\n  methods: {\n    async carregarUsuarios() {\n      this.itens = await servicoUsuario.getUsers();\n      console.log(JSON.stringify(this.itens));\n    },\n    abrirEditar(item) {\n      this.indiceEditado = this.itens.indexOf(item);\n      this.itemEditado = Object.assign({}, item);\n    },\n    fecharEditar() {\n      setTimeout(() => {\n        this.itemEditado = {};\n        this.indiceEditado = -1;\n      }, 300);      \n    },\n    atualizarItem() {\n      servicoUsuario.updateUser(this.itemEditado)\n      .then(()=>{\n        // mensagem ao usuário...\n        this.fecharEditar();\n      })\n      .catch((e)=>{\n        console.error(e);\n        this.fecharEditar();\n      });\n    },\n    criarItem(){\n      servicoUsuario.createUser(this.itemEditado)\n      .then(()=>{\n        // mensagem ao usuário...\n        this.fecharEditar();\n      })\n      .catch((e)=>{\n        console.error(e);\n        this.fecharEditar();\n      });\n    },\n    async salvarItem() {\n      //console.log(`teste salvar`)\n      if (this.indiceEditado > -1) {\n        Object.assign(this.itens[this.indiceEditado], this.itemEditado);\n      }\n      console.log(this.itemEditado)\n      if (this.itemEditado.id > 0) {\n        await this.atualizarItem();\n      } else {\n        this.itemEditado.password = '123456'\n        await this.criarItem();\n      }\n      this.carregarUsuarios();\n    },\n    novoUsuario() {\n      this.itens.push(this.itemDefault);\n      this.indiceEditado = this.itens.length-1;\n      console.log(this.itens[this.indiceEditado]);\n      this.itemEditado = Object.assign({}, this.itemDefault);\n    },\n  },\n\n  mounted() {\n    this.carregarUsuarios();    \n  },   \n};\n\n</script>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}