{"ast":null,"code":"import Modal from \"./modal.vue\";\nimport servicoUsuario from \"../api/usuario\";\nexport default {\n  name: \"vwEditUser\",\n  components: {\n    Modal\n  },\n  data: () => ({\n    editedUser: {\n      username: '',\n      password: '',\n      confirmaPassword: '',\n      perfil_id: null\n    },\n    exibirModal: false,\n    mensagem: '',\n    perfis: [],\n    perfilSelecionado: null\n  }),\n  methods: {\n    async salvar() {\n      //console.log(JSON.stringify(this.credenciais))\n      this.editedUser.password = null;\n      this.editedUser.perfil_id = this.perfilSelecionado.id;\n      alert(this.editedUser.perfil_id);\n      await servicoUsuario.updateUser(this.editedUser).then(res => {\n        console.log(JSON.stringify(res));\n        this.mensagem = `Usuário salvo com sucesso!`;\n        this.exibirModal = true;\n      }).catch(() => {\n        this.mensagem = `Falha ao salvar usuário!`;\n        this.exibirModal = true;\n      });\n    }\n  },\n  async mounted() {\n    console.log(`antes de buscar perfis`);\n    servicoUsuario.getPerfis().then(async res => {\n      this.perfis = res;\n      this.editedUser = await servicoUsuario.getUser(this.$route.params.id);\n      this.perfilSelecionado = this.editedUser.perfil_id;\n    }).catch(e => {\n      console.error(JSON.stringify(e));\n    });\n    console.log(`depios de buscar perfis ${this.perfis.length}`);\n  }\n};","map":{"version":3,"names":["Modal","servicoUsuario","name","components","data","editedUser","username","password","confirmaPassword","perfil_id","exibirModal","mensagem","perfis","perfilSelecionado","methods","salvar","id","alert","updateUser","then","res","console","log","JSON","stringify","catch","mounted","getPerfis","getUser","$route","params","e","error","length"],"sources":["/drop/Dropbox/vuejs/5a_app/src/components/edit_user.vue"],"sourcesContent":["<template>\n  <v-container>\n    <v-row class=\"text-center\">\n\n      <v-col class=\"mb-4\">\n        <h1 class=\"display-2 font-weight-bold mb-3\">\n          Editar Usuário\n        </h1>\n\n        <v-sheet class=\"mx-auto\" max-width=\"300\">\n          <v-form ref=\"form\">\n            <v-text-field v-model=\"editedUser.username\" label=\"Username\" required></v-text-field>\n            <v-text-field v-model=\"editedUser.password\" label=\"Password\" type=\"password\" required></v-text-field>\n            <v-text-field v-model=\"editedUser.confirmaPassword\" label=\"Confirmar password\" type=\"password\" required></v-text-field>\n            <v-select :items=\"perfis\" v-model=\"perfilSelecionado\" label=\"Perfil\"\n              item-title=\"perfil\" item-value=\"id\" \n            ></v-select>\n            <v-btn @click=\"salvar\">Salvar</v-btn>\n          </v-form>\n        </v-sheet>\n      </v-col>\n    </v-row>\n    <Modal v-model=\"exibirModal\" :texto=\"mensagem\"></Modal>\n  </v-container>\n</template>\n\n<script>\n\nimport Modal from \"./modal.vue\"\nimport servicoUsuario from \"../api/usuario\";\n\nexport default {\n  name: \"vwEditUser\",\n  components: {\n    Modal\n  },\n  data: () => ({\n    editedUser: {\n      username: '',\n      password: '',\n      confirmaPassword: '',\n      perfil_id: null\n    },\n    exibirModal: false,\n    mensagem: '',\n    perfis: [],\n    perfilSelecionado: null\n  }),\n\n  methods: {\n    async salvar() {\n      //console.log(JSON.stringify(this.credenciais))\n      this.editedUser.password = null;\n      this.editedUser.perfil_id = this.perfilSelecionado.id;\nalert(this.editedUser.perfil_id)\n      await servicoUsuario.updateUser(this.editedUser)\n        .then((res) => {\n          console.log(JSON.stringify(res));\n          this.mensagem = `Usuário salvo com sucesso!`\n          this.exibirModal = true;\n        })\n        .catch(() => {\n          this.mensagem = `Falha ao salvar usuário!`\n          this.exibirModal = true;\n        });\n    },\n  },\n\n  async mounted() {\n    console.log(`antes de buscar perfis`)\n    servicoUsuario.getPerfis()\n    .then(async (res) => {\n      this.perfis = res;\n      this.editedUser = await servicoUsuario.getUser(this.$route.params.id);\n      this.perfilSelecionado = this.editedUser.perfil_id;\n    })\n    .catch((e)=>{\n      console.error(JSON.stringify(e));\n    });\n    console.log(`depios de buscar perfis ${this.perfis.length}`)\n  }\n};\n\n</script>"],"mappings":"AA4BA,OAAOA,KAAI,MAAO,aAAY;AAC9B,OAAOC,cAAa,MAAO,gBAAgB;AAE3C,eAAe;EACbC,IAAI,EAAE,YAAY;EAClBC,UAAU,EAAE;IACVH;EACF,CAAC;EACDI,IAAI,EAAEA,CAAA,MAAO;IACXC,UAAU,EAAE;MACVC,QAAQ,EAAE,EAAE;MACZC,QAAQ,EAAE,EAAE;MACZC,gBAAgB,EAAE,EAAE;MACpBC,SAAS,EAAE;IACb,CAAC;IACDC,WAAW,EAAE,KAAK;IAClBC,QAAQ,EAAE,EAAE;IACZC,MAAM,EAAE,EAAE;IACVC,iBAAiB,EAAE;EACrB,CAAC,CAAC;EAEFC,OAAO,EAAE;IACP,MAAMC,MAAMA,CAAA,EAAG;MACb;MACA,IAAI,CAACV,UAAU,CAACE,QAAO,GAAI,IAAI;MAC/B,IAAI,CAACF,UAAU,CAACI,SAAQ,GAAI,IAAI,CAACI,iBAAiB,CAACG,EAAE;MAC3DC,KAAK,CAAC,IAAI,CAACZ,UAAU,CAACI,SAAS;MACzB,MAAMR,cAAc,CAACiB,UAAU,CAAC,IAAI,CAACb,UAAU,EAC5Cc,IAAI,CAAEC,GAAG,IAAK;QACbC,OAAO,CAACC,GAAG,CAACC,IAAI,CAACC,SAAS,CAACJ,GAAG,CAAC,CAAC;QAChC,IAAI,CAACT,QAAO,GAAI,4BAA2B;QAC3C,IAAI,CAACD,WAAU,GAAI,IAAI;MACzB,CAAC,EACAe,KAAK,CAAC,MAAM;QACX,IAAI,CAACd,QAAO,GAAI,0BAAyB;QACzC,IAAI,CAACD,WAAU,GAAI,IAAI;MACzB,CAAC,CAAC;IACN;EACF,CAAC;EAED,MAAMgB,OAAOA,CAAA,EAAG;IACdL,OAAO,CAACC,GAAG,CAAC,wBAAwB;IACpCrB,cAAc,CAAC0B,SAAS,CAAC,EACxBR,IAAI,CAAC,MAAOC,GAAG,IAAK;MACnB,IAAI,CAACR,MAAK,GAAIQ,GAAG;MACjB,IAAI,CAACf,UAAS,GAAI,MAAMJ,cAAc,CAAC2B,OAAO,CAAC,IAAI,CAACC,MAAM,CAACC,MAAM,CAACd,EAAE,CAAC;MACrE,IAAI,CAACH,iBAAgB,GAAI,IAAI,CAACR,UAAU,CAACI,SAAS;IACpD,CAAC,EACAgB,KAAK,CAAEM,CAAC,IAAG;MACVV,OAAO,CAACW,KAAK,CAACT,IAAI,CAACC,SAAS,CAACO,CAAC,CAAC,CAAC;IAClC,CAAC,CAAC;IACFV,OAAO,CAACC,GAAG,CAAC,2BAA2B,IAAI,CAACV,MAAM,CAACqB,MAAM,EAAE;EAC7D;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}