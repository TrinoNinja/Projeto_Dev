{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock, toDisplayString as _toDisplayString, createElementBlock as _createElementBlock, createTextVNode as _createTextVNode, withCtx as _withCtx, createVNode as _createVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"user\"\n};\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"mx-auto\",\n  style: {\n    \"padding\": \"20px\",\n    \"max-width\": \"300px\"\n  }\n}, \"Usuários\", -1 /* HOISTED */);\nconst _hoisted_3 = {\n  key: 1\n};\nconst _hoisted_4 = {\n  key: 1\n};\nconst _hoisted_5 = {\n  style: {\n    \"display\": \"flex\",\n    \"align-items\": \"center\"\n  }\n};\nconst _hoisted_6 = {\n  key: 0\n};\nconst _hoisted_7 = {\n  key: 1\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_v_text_field = _resolveComponent(\"v-text-field\");\n  const _component_v_icon = _resolveComponent(\"v-icon\");\n  const _component_v_data_table = _resolveComponent(\"v-data-table\");\n  const _component_v_btn = _resolveComponent(\"v-btn\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _createCommentVNode(\"<ul>\\n       <li v-for=\\\"user in itens\\\" :key=\\\"user.username\\\">\\n         {{ user.username }}\\n       </li>\\n     </ul>\"), _createVNode(_component_v_data_table, {\n    headers: _ctx.headers,\n    items: _ctx.itens\n  }, {\n    [`item.username`]: _withCtx(({\n      item\n    }) => [item.id === _ctx.itemEditado.id ? (_openBlock(), _createBlock(_component_v_text_field, {\n      key: 0,\n      id: `username_${item.id}`,\n      ref: `username_${item.id}`,\n      modelValue: _ctx.itemEditado.username,\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => _ctx.itemEditado.username = $event),\n      \"hide-details\": true,\n      dense: \"\",\n      \"single-line\": \"\"\n    }, null, 8 /* PROPS */, [\"id\", \"modelValue\"])) : (_openBlock(), _createElementBlock(\"span\", _hoisted_3, _toDisplayString(item.username), 1 /* TEXT */))]),\n    [`item.password`]: _withCtx(({\n      item\n    }) => [item.id === _ctx.itemEditado.id ? (_openBlock(), _createBlock(_component_v_text_field, {\n      key: 0,\n      id: `password${item.id}`,\n      ref: `password${item.id}`,\n      modelValue: _ctx.itemEditado.password,\n      \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => _ctx.itemEditado.password = $event),\n      \"hide-details\": true,\n      dense: \"\",\n      \"single-line\": \"\"\n    }, null, 8 /* PROPS */, [\"id\", \"modelValue\"])) : (_openBlock(), _createElementBlock(\"span\", _hoisted_4, _toDisplayString(item.password), 1 /* TEXT */))]),\n    [`item.actions`]: _withCtx(({\n      item\n    }) => [_createElementVNode(\"div\", _hoisted_5, [item.id === _ctx.itemEditado.id ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [_createVNode(_component_v_icon, {\n      color: \"red\",\n      class: \"mr-3\",\n      onClick: _cache[2] || (_cache[2] = $event => $options.fecharEditar())\n    }, {\n      default: _withCtx(() => [_createTextVNode(\" mdi-window-close \")]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_v_icon, {\n      color: \"green\",\n      onClick: _cache[3] || (_cache[3] = $event => $options.salvarItem())\n    }, {\n      default: _withCtx(() => [_createTextVNode(\" mdi-content-save \")]),\n      _: 1 /* STABLE */\n    })])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [_createVNode(_component_v_icon, {\n      class: \"light-green\",\n      onClick: $event => $options.abrirEditar(item),\n      title: \"Editar\"\n    }, {\n      default: _withCtx(() => [_createTextVNode(\" mdi-pencil \")]),\n      _: 2 /* DYNAMIC */\n    }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"])]))])]),\n    _: 2 /* DYNAMIC */\n  }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"headers\", \"items\"]), _ctx.indiceEditado === -1 ? (_openBlock(), _createBlock(_component_v_btn, {\n    key: 0,\n    small: \"\",\n    elevation: \"\",\n    color: \"success\",\n    onClick: _cache[4] || (_cache[4] = $event => $options.novoUsuario())\n  }, {\n    default: _withCtx(() => [_createTextVNode(\" + NOVO USUÁRIO \")]),\n    _: 1 /* STABLE */\n  })) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","_createElementVNode","style","key","_createElementBlock","_hoisted_1","_hoisted_2","_createCommentVNode","_createVNode","_component_v_data_table","headers","_ctx","items","itens","_withCtx","item","id","itemEditado","_createBlock","_component_v_text_field","ref","modelValue","username","_cache","$event","dense","_hoisted_3","_toDisplayString","password","_hoisted_4","_hoisted_5","_hoisted_6","_component_v_icon","color","onClick","$options","fecharEditar","default","_createTextVNode","_","salvarItem","_hoisted_7","abrirEditar","title","indiceEditado","_component_v_btn","small","elevation","novoUsuario"],"sources":["/drop/Dropbox/vuejs/8o_app/src/components/users.vue"],"sourcesContent":["<template>\n <div class=\"user\">\n     <div class=\"mx-auto\" style=\"padding:20px;max-width:300px;\">Usuários</div>\n     <!--<ul>\n       <li v-for=\"user in itens\" :key=\"user.username\">\n         {{ user.username }}\n       </li>\n     </ul>-->\n     <v-data-table :headers=\"headers\" :items=\"itens\">\n\n    <template v-slot:[`item.username`]=\"{ item }\">\n        <v-text-field\n          :id=\"`username_${item.id}`\"\n          :ref=\"`username_${item.id}`\"\n          v-model=\"itemEditado.username\"\n          :hide-details=\"true\"\n          dense\n          single-line\n          v-if=\"item.id === itemEditado.id\"\n        ></v-text-field>\n        <span v-else>{{ item.username }}</span>\n      </template>\n\n    <template v-slot:[`item.password`]=\"{ item }\">\n        <v-text-field\n          :id=\"`password${item.id}`\"\n          :ref=\"`password${item.id}`\"\n          v-model=\"itemEditado.password\"\n          :hide-details=\"true\"\n          dense\n          single-line\n          v-if=\"item.id === itemEditado.id\"\n        ></v-text-field>\n        <span v-else>{{ item.password }}</span>\n      </template>\n\n    <template v-slot:[`item.actions`]=\"{ item }\">\n      <div style=\"display: flex; align-items: center\">\n        <div v-if=\"item.id === itemEditado.id\">\n          <v-icon color=\"red\" class=\"mr-3\" @click=\"fecharEditar()\">\n              mdi-window-close\n            </v-icon>\n            <v-icon color=\"green\" @click=\"salvarItem()\">\n              mdi-content-save\n            </v-icon>\n        </div>\n        <div v-else>\n          <v-icon class=\"light-green\" @click=\"abrirEditar(item)\" title=\"Editar\">\n              mdi-pencil\n            </v-icon>\n        </div>\n      </div>\n    </template> \n\n     </v-data-table>\n      <v-btn v-if=\"indiceEditado === -1\" small elevation=\"\" color=\"success\" @click=\"novoUsuario()\">\n          + NOVO USUÁRIO\n      </v-btn>     \n\n   </div>\n</template>\n\n<script>\n\n//import dados from \"../api\";\nimport servicoUsuario from \"../api/usuario\";\n\nexport default {\n  name: \"vwUser\",\n\n  data: () => ({\n    itens: [],\n    itemDefault: {\n      id: 0, \n      username: 'Novo',\n      password: '123456'\n    },    \n    itemEditado: {},\n    indiceEditado: -1,\n    headers: [\n      { key: 'id', title: 'ID' },\n      { key: 'username', title: 'Usuário' },\n      { key: 'password', title: 'Senha' },\n      { key: 'actions', title: \"Ações\"  },\n    ],\n  }),\n\n  methods: {\n    async carregarUsuarios() {\n      this.itens = await servicoUsuario.getUsers();\n      console.log(JSON.stringify(this.itens));\n    },\n    abrirEditar(item) {\n      this.indiceEditado = this.itens.indexOf(item);\n      this.itemEditado = Object.assign({}, item);\n    },\n    fecharEditar() {\n      setTimeout(() => {\n        this.itemEditado = {};\n        this.indiceEditado = -1;\n      }, 300);      \n    },\n    atualizarItem() {\n      servicoUsuario.updateUser(this.itemEditado)\n      .then(()=>{\n        // mensagem ao usuário...\n        this.fecharEditar();\n      })\n      .catch((e)=>{\n        console.error(e);\n        this.fecharEditar();\n      });\n    },\n    criarItem(){\n      servicoUsuario.createUser(this.itemEditado)\n      .then(()=>{\n        // mensagem ao usuário...\n        this.fecharEditar();\n      })\n      .catch((e)=>{\n        console.error(e);\n        this.fecharEditar();\n      });\n    },\n    async salvarItem() {\n      //console.log(`teste salvar`)\n      if (this.indiceEditado > -1) {\n        Object.assign(this.itens[this.indiceEditado], this.itemEditado);\n      }\n      console.log(this.itemEditado)\n      if (this.itemEditado.id > 0) {\n        await this.atualizarItem();\n      } else {\n        this.itemEditado.password = '123456'\n        await this.criarItem();\n      }\n      this.carregarUsuarios();\n    },\n    novoUsuario() {\n      this.itens.push(this.itemDefault);\n      this.indiceEditado = this.itens.length-1;\n      console.log(this.itens[this.indiceEditado]);\n      this.itemEditado = Object.assign({}, this.itemDefault);\n    },\n  },\n\n  mounted() {\n    this.carregarUsuarios();    \n  },   \n};\n\n</script>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}